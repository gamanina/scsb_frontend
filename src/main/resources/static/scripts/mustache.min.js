!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Mustache=t()}(this,function(){"use strict";var t=Object.prototype.toString,E=Array.isArray||function(e){return"[object Array]"===t.call(e)};function u(e){return"function"==typeof e}function T(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function l(e,t){return null!=e&&"object"==typeof e&&t in e}var n=RegExp.prototype.test;var r=/\S/;function j(e){return!n.call(r,e)}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var U=/\s*/,S=/\s+/,P=/\s*=/,V=/\s*\}/,O=/#|\^|\/|>|\{|&|=|!/;function s(e,t){if(!e)return[];var n,r,i,o=!1,s=[],a=[],c=[],p=!1,u=!1,l="",h=0;function f(){if(p&&!u)for(;c.length;)delete a[c.pop()];else c=[];u=p=!1}function g(e){if("string"==typeof e&&(e=e.split(S,2)),!E(e)||2!==e.length)throw new Error("Invalid tags: "+e);n=new RegExp(T(e[0])+"\\s*"),r=new RegExp("\\s*"+T(e[1])),i=new RegExp("\\s*"+T("}"+e[1]))}g(t||I.tags);for(var d,v,y,w,m,b,C=new A(e);!C.eos();){if(d=C.pos,y=C.scanUntil(n))for(var k=0,x=y.length;k<x;++k)j(w=y.charAt(k))?(c.push(a.length),l+=w):(o=u=!0,l+=" "),a.push(["text",w,d,d+1]),d+=1,"\n"===w&&(f(),l="",h=0,o=!1);if(!C.scan(n))break;if(p=!0,v=C.scan(O)||"name",C.scan(U),"="===v?(y=C.scanUntil(P),C.scan(P),C.scanUntil(r)):"{"===v?(y=C.scanUntil(i),C.scan(V),C.scanUntil(r),v="&"):y=C.scanUntil(r),!C.scan(r))throw new Error("Unclosed tag at "+C.pos);if(m=">"==v?[v,y,d,C.pos,l,h,o]:[v,y,d,C.pos],h++,a.push(m),"#"===v||"^"===v)s.push(m);else if("/"===v){if(!(b=s.pop()))throw new Error('Unopened section "'+y+'" at '+d);if(b[1]!==y)throw new Error('Unclosed section "'+b[1]+'" at '+d)}else"name"===v||"{"===v||"&"===v?u=!0:"="===v&&g(y)}if(f(),b=s.pop())throw new Error('Unclosed section "'+b[1]+'" at '+C.pos);return function(e){for(var t,n=[],r=n,i=[],o=0,s=e.length;o<s;++o)switch((t=e[o])[0]){case"#":case"^":r.push(t),i.push(t),r=t[4]=[];break;case"/":i.pop()[5]=t[2],r=0<i.length?i[i.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],i=0,o=e.length;i<o;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(a))}function A(e){this.string=e,this.tail=e,this.pos=0}function o(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function e(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}A.prototype.eos=function(){return""===this.tail},A.prototype.scan=function(e){e=this.tail.match(e);if(!e||0!==e.index)return"";e=e[0];return this.tail=this.tail.substring(e.length),this.pos+=e.length,e},A.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},o.prototype.push=function(e){return new o(e,this)},o.prototype.lookup=function(e){var t,n,r,i=this.cache;if(i.hasOwnProperty(e))t=i[e];else{for(var o,s,a,c=this,p=!1;c;){if(0<e.indexOf("."))for(o=c.view,s=e.split("."),a=0;null!=o&&a<s.length;)a===s.length-1&&(p=l(o,s[a])||(n=o,r=s[a],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(r))),o=o[s[a++]];else o=c.view[e],p=l(c.view,e);if(p){t=o;break}c=c.parent}i[e]=t}return t=u(t)?t.call(this.view):t},e.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},e.prototype.parse=function(e,t){var n=this.templateCache,r=e+":"+(t||I.tags).join(":"),i=void 0!==n,o=i?n.get(r):void 0;return null==o&&(o=s(e,t),i&&n.set(r,o)),o},e.prototype.render=function(e,t,n,r){var i=this.getConfigTags(r),i=this.parse(e,i),t=t instanceof o?t:new o(t,void 0);return this.renderTokens(i,t,n,e,r)},e.prototype.renderTokens=function(e,t,n,r,i){for(var o,s,a,c="",p=0,u=e.length;p<u;++p)a=void 0,"#"===(s=(o=e[p])[0])?a=this.renderSection(o,t,n,r,i):"^"===s?a=this.renderInverted(o,t,n,r,i):">"===s?a=this.renderPartial(o,t,n,i):"&"===s?a=this.unescapedValue(o,t):"name"===s?a=this.escapedValue(o,t,i):"text"===s&&(a=this.rawValue(o)),void 0!==a&&(c+=a);return c},e.prototype.renderSection=function(e,t,n,r,i){var o=this,s="",a=t.lookup(e[1]);if(a){if(E(a))for(var c=0,p=a.length;c<p;++c)s+=this.renderTokens(e[4],t.push(a[c]),n,r,i);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)s+=this.renderTokens(e[4],t.push(a),n,r,i);else if(u(a)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(a=a.call(t.view,r.slice(e[3],e[5]),function(e){return o.render(e,t,n,i)}))&&(s+=a)}else s+=this.renderTokens(e[4],t,n,r,i);return s}},e.prototype.renderInverted=function(e,t,n,r,i){var o=t.lookup(e[1]);if(!o||E(o)&&0===o.length)return this.renderTokens(e[4],t,n,r,i)},e.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),i=e.split("\n"),o=0;o<i.length;o++)i[o].length&&(0<o||!n)&&(i[o]=r+i[o]);return i.join("\n")},e.prototype.renderPartial=function(e,t,n,r){if(n){var i=this.getConfigTags(r),o=u(n)?n(e[1]):n[e[1]];if(null!=o){var s=e[6],a=e[5],c=e[4],e=o;0==a&&c&&(e=this.indentPartial(o,c,s));i=this.parse(e,i);return this.renderTokens(i,t,n,e,r)}}},e.prototype.unescapedValue=function(e,t){e=t.lookup(e[1]);if(null!=e)return e},e.prototype.escapedValue=function(e,t,n){n=this.getConfigEscape(n)||I.escape,e=t.lookup(e[1]);if(null!=e)return("number"==typeof e&&n===I.escape?String:n)(e)},e.prototype.rawValue=function(e){return e[1]},e.prototype.getConfigTags=function(e){return E(e)?e:e&&"object"==typeof e?e.tags:void 0},e.prototype.getConfigEscape=function(e){if(e&&"object"==typeof e&&!E(e))return e.escape};var I={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){a.templateCache=e},get templateCache(){return a.templateCache}},a=new e;return I.clearCache=function(){return a.clearCache()},I.parse=function(e,t){return a.parse(e,t)},I.render=function(e,t,n,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(E(i=e)?"array":typeof i)+'" was given as the first argument for mustache#render(template, view, partials)');var i;return a.render(e,t,n,r)},I.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return i[e]})},I.Scanner=A,I.Context=o,I.Writer=e,I});