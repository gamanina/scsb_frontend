!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).Mustache=t()}(this,function(){"use strict";var t=Object.prototype.toString,E=Array.isArray||function(e){return"[object Array]"===t.call(e)};function p(e){return"function"==typeof e}function U(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function l(e,t){return null!=e&&"object"==typeof e&&t in e}var n=RegExp.prototype.test;var r=/\S/;function j(e){return!function(e,t){return n.call(e,t)}(r,e)}var i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var T=/\s*/,P=/\s+/,S=/\s*=/,V=/\s*\}/,O=/#|\^|\/|>|\{|&|=|!/;function a(e,t){if(!e)return[];var n,r,i,o=!1,a=[],s=[],c=[],u=!1,p=!1,l="",h=0;function f(){if(u&&!p)for(;c.length;)delete s[c.pop()];else c=[];p=u=!1}function d(e){if("string"==typeof e&&(e=e.split(P,2)),!E(e)||2!==e.length)throw new Error("Invalid tags: "+e);n=new RegExp(U(e[0])+"\\s*"),r=new RegExp("\\s*"+U(e[1])),i=new RegExp("\\s*"+U("}"+e[1]))}d(t||I.tags);for(var v,g,y,w,m,b,k=new A(e);!k.eos();){if(v=k.pos,y=k.scanUntil(n))for(var x=0,C=y.length;x<C;++x)j(w=y.charAt(x))?(c.push(s.length),l+=w):(o=p=!0,l+=" "),s.push(["text",w,v,v+1]),v+=1,"\n"===w&&(f(),l="",h=0,o=!1);if(!k.scan(n))break;if(u=!0,g=k.scan(O)||"name",k.scan(T),"="===g?(y=k.scanUntil(S),k.scan(S),k.scanUntil(r)):"{"===g?(y=k.scanUntil(i),k.scan(V),k.scanUntil(r),g="&"):y=k.scanUntil(r),!k.scan(r))throw new Error("Unclosed tag at "+k.pos);if(m=">"==g?[g,y,v,k.pos,l,h,o]:[g,y,v,k.pos],h++,s.push(m),"#"===g||"^"===g)a.push(m);else if("/"===g){if(!(b=a.pop()))throw new Error('Unopened section "'+y+'" at '+v);if(b[1]!==y)throw new Error('Unclosed section "'+b[1]+'" at '+v)}else"name"===g||"{"===g||"&"===g?p=!0:"="===g&&d(y)}if(f(),b=a.pop())throw new Error('Unclosed section "'+b[1]+'" at '+k.pos);return function(e){for(var t,n=[],r=n,i=[],o=0,a=e.length;o<a;++o)switch((t=e[o])[0]){case"#":case"^":r.push(t),i.push(t),r=t[4]=[];break;case"/":i.pop()[5]=t[2],r=0<i.length?i[i.length-1][4]:n;break;default:r.push(t)}return n}(function(e){for(var t,n,r=[],i=0,o=e.length;i<o;++i)(t=e[i])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(r.push(t),n=t));return r}(s))}function A(e){this.string=e,this.tail=e,this.pos=0}function s(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function e(){this.templateCache={_cache:{},set:function(e,t){this._cache[e]=t},get:function(e){return this._cache[e]},clear:function(){this._cache={}}}}A.prototype.eos=function(){return""===this.tail},A.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},A.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},s.prototype.push=function(e){return new s(e,this)},s.prototype.lookup=function(e){var t,n,r,i=this.cache;if(i.hasOwnProperty(e))t=i[e];else{for(var o,a,s,c=this,u=!1;c;){if(0<e.indexOf("."))for(o=c.view,a=e.split("."),s=0;null!=o&&s<a.length;)s===a.length-1&&(u=l(o,a[s])||(n=o,r=a[s],null!=n&&"object"!=typeof n&&n.hasOwnProperty&&n.hasOwnProperty(r))),o=o[a[s++]];else o=c.view[e],u=l(c.view,e);if(u){t=o;break}c=c.parent}i[e]=t}return p(t)&&(t=t.call(this.view)),t},e.prototype.clearCache=function(){void 0!==this.templateCache&&this.templateCache.clear()},e.prototype.parse=function(e,t){var n=this.templateCache,r=e+":"+(t||I.tags).join(":"),i=void 0!==n,o=i?n.get(r):void 0;return null==o&&(o=a(e,t),i&&n.set(r,o)),o},e.prototype.render=function(e,t,n,r){var i=this.parse(e,r),o=t instanceof s?t:new s(t,void 0);return this.renderTokens(i,o,n,e,r)},e.prototype.renderTokens=function(e,t,n,r,i){for(var o,a,s,c="",u=0,p=e.length;u<p;++u)s=void 0,"#"===(a=(o=e[u])[0])?s=this.renderSection(o,t,n,r):"^"===a?s=this.renderInverted(o,t,n,r):">"===a?s=this.renderPartial(o,t,n,i):"&"===a?s=this.unescapedValue(o,t):"name"===a?s=this.escapedValue(o,t):"text"===a&&(s=this.rawValue(o)),void 0!==s&&(c+=s);return c},e.prototype.renderSection=function(e,t,n,r){var i=this,o="",a=t.lookup(e[1]);if(a){if(E(a))for(var s=0,c=a.length;s<c;++s)o+=this.renderTokens(e[4],t.push(a[s]),n,r);else if("object"==typeof a||"string"==typeof a||"number"==typeof a)o+=this.renderTokens(e[4],t.push(a),n,r);else if(p(a)){if("string"!=typeof r)throw new Error("Cannot use higher-order sections without the original template");null!=(a=a.call(t.view,r.slice(e[3],e[5]),function(e){return i.render(e,t,n)}))&&(o+=a)}else o+=this.renderTokens(e[4],t,n,r);return o}},e.prototype.renderInverted=function(e,t,n,r){var i=t.lookup(e[1]);if(!i||E(i)&&0===i.length)return this.renderTokens(e[4],t,n,r)},e.prototype.indentPartial=function(e,t,n){for(var r=t.replace(/[^ \t]/g,""),i=e.split("\n"),o=0;o<i.length;o++)i[o].length&&(0<o||!n)&&(i[o]=r+i[o]);return i.join("\n")},e.prototype.renderPartial=function(e,t,n,r){if(n){var i=p(n)?n(e[1]):n[e[1]];if(null!=i){var o=e[6],a=e[5],s=e[4],c=i;return 0==a&&s&&(c=this.indentPartial(i,s,o)),this.renderTokens(this.parse(c,r),t,n,c,r)}}},e.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},e.prototype.escapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return I.escape(n)},e.prototype.rawValue=function(e){return e[1]};var I={name:"mustache.js",version:"4.0.1",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(e){o.templateCache=e},get templateCache(){return o.templateCache}},o=new e;return I.clearCache=function(){return o.clearCache()},I.parse=function(e,t){return o.parse(e,t)},I.render=function(e,t,n,r){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+function(e){return E(e)?"array":typeof e}(e)+'" was given as the first argument for mustache#render(template, view, partials)');return o.render(e,t,n,r)},I.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return i[e]})},I.Scanner=A,I.Context=s,I.Writer=e,I});